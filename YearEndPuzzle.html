<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Year-End Puzzle Challenge</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #fbfbfb;
      margin: 0;
      padding: 24px;
    }
    h2 { margin-bottom: 6px; color:#333; }
    #puzzle {
      margin: 18px auto;
      display: grid;
      grid-template-columns: repeat(20, 34px);
      grid-auto-rows: 34px;
      gap: 4px;
      justify-content: center;
      max-width: calc(20 * 34px + 4 * 19px);
    }
    .cell {
      width: 34px; height: 34px;
      display:flex; align-items:center; justify-content:center;
      border-radius:4px;
      background: #fff;
      border: 1px solid #e2e2e2;
      font-weight:700;
      cursor: pointer;
      user-select: none;
      color:#222;
    }
    .cell.found {
      background: #f1f1f1;
      color: #000;
      box-shadow: inset 0 0 0 3px rgba(255,223,186,0.6);
    }
    #slideshow {
      display: none;
      margin-top: 26px;
    }
    #slideshow h3 { margin-bottom: 10px; color:#222; }
    #slideshow img {
      width: 360px;
      max-width: 88%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 8px 26px rgba(0,0,0,0.18);
      transition: opacity 0.6s ease-in-out;
    }
    @media (max-width:600px){
      #puzzle { grid-template-columns: repeat(14, 28px); }
      .cell { width:28px; height:28px; font-size:12px; }
      #slideshow img { width: 260px; max-width: 92%; }
    }
  </style>
</head>
<body>

  <h2>Secret Word Search Challenge</h2>
  <p>Click the letters you think form the secret word. When you find it, a surprise will appear ✨</p>

  <div id="puzzle" aria-label="word search grid"></div>

  <div id="slideshow" aria-hidden="true">
    <h3>✨ Surprise Reveal ✨</h3>
    <img id="slide" src="" alt="Reveal image">
  </div>

<script>
const SECRET_PHRASE = "ALLWHITELUXEAFFAIR";
const COLS = 20;
const ROWS = 12;
const phraseRow = Math.floor(ROWS/2);

const images = [
  "https://raw.githubusercontent.com/bubblezabadgal-sudo/Yearendpictures/main/IMG_0074.jpeg",
  "https://raw.githubusercontent.com/bubblezabadgal-sudo/Yearendpictures/main/IMG_0075.jpeg",
  "https://raw.githubusercontent.com/bubblezabadgal-sudo/Yearendpictures/main/IMG_0077.jpeg",
  "https://raw.githubusercontent.com/bubblezabadgal-sudo/Yearendpictures/main/IMG_0078.jpeg",
  "https://raw.githubusercontent.com/bubblezabadgal-sudo/Yearendpictures/main/IMG_0079.jpeg",
  "https://raw.githubusercontent.com/bubblezabadgal-sudo/Yearendpictures/main/IMG_0080.jpeg"
];

const grid = [];
for (let r=0; r<ROWS; r++){
  grid[r] = [];
  for (let c=0; c<COLS; c++){
    grid[r][c] = String.fromCharCode(65 + Math.floor(Math.random()*26));
  }
}
const startCol = 1;
for (let i=0; i<SECRET_PHRASE.length; i++){
  grid[phraseRow][startCol + i] = SECRET_PHRASE.charAt(i);
}

const puzzleDiv = document.getElementById('puzzle');
const positionIndexes = [];
for (let r=0; r<ROWS; r++){
  for (let c=0; c<COLS; c++){
    const cell = document.createElement('div');
    cell.className = 'cell';
    cell.textContent = grid[r][c];
    cell.dataset.r = r;
    cell.dataset.c = c;
    puzzleDiv.appendChild(cell);
    if (r === phraseRow && c >= startCol && c < startCol + SECRET_PHRASE.length){
      positionIndexes.push({r, c, found: false, el: cell});
    }
  }
}

let foundCount = 0;
positionIndexes.forEach(pos => {
  pos.el.addEventListener('click', () => {
    if (!pos.found) {
      pos.el.classList.add('found');
      pos.found = true;
      foundCount++;
      if (foundCount >= positionIndexes.length){
        reveal();
      }
    }
  });
});

function reveal(){
  if (document.getElementById('slideshow').style.display === 'block') return;
  document.getElementById('puzzle').style.display = 'none';
  const slideWrapper = document.getElementById('slideshow');
  const slideImg = document.getElementById('slide');
  slideWrapper.style.display = 'block';
  let idx = 0;
  slideImg.src = images[0];
  setInterval(()=> {
    idx = (idx + 1) % images.length;
    slideImg.style.opacity = 0;
    setTimeout(()=> {
      slideImg.src = images[idx];
      slideImg.style.opacity = 1;
    }, 180);
  }, 3000);
}
</script>
</body>
</html>
